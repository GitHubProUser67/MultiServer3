<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home Lab Web Tools</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      background-color: #333;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 10px;
    }

    .app-container {
      width: 85%;
      flex-direction: column;
      border: 1px solid #454545;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      background: #2d2d2d;
      min-height: 80vh;
    }

    .header {
      padding: 10px;
      background: #1e1e1e;
      text-align: center;
    }

    .tab-container {
      display: flex;
      justify-content: center;
      align-items: center;
      background: #2d2d2d;
      padding: 2px;
    }

    .tab {
      padding: 12px;
      margin: 0 2px;
      cursor: pointer;
      border: 1px solid #555;
      background: none;
      color: white;
      font-size: 20px;
    }

    .tab:hover {
      border: 1px solid #555;
    }

    .tab.active {
      border: 3px solid #0078d7;
      color: #0078d7;
      font-size: 20px;
      padding-top: 7px;
      padding-bottom: 13px;
    }

    .content {
      padding: 10px;
      background: #1e1e1e;
      flex-grow: 1;
    }

    button,
    input[type="button"],
    input[type="submit"] {
      background: #0078d7;
      color: white;
      border: none;
      padding: 10px;
      margin: 5px;
      border-radius: 4px;
      cursor: pointer;
    }

    .button-style {
      background-color: #444;
      border: none;
      color: white;
      padding: 10px 20px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      margin: 4px 2px;
      transition-duration: 0.4s;
      cursor: pointer;
      border-radius: 5px;
      box-shadow: 0px 2px 2px 0px rgba(0, 0, 0, 0.2);
    }

    .button-style:hover {
      background-color: #555;
      box-shadow: 0px 0px 6px 0px rgba(255, 255, 255, 0.8);
    }

    .button-style4 {
      background-color: #444;
      border: none;
      color: white;
      padding: 10px 20px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      transition-duration: 0.4s;
      cursor: pointer;
      border-radius: 5px;
      box-shadow: 0px 2px 2px 0px rgba(0, 0, 0, 0.2);
    }


    input[type="checkbox"],
    input[type="radio"] {
      margin-right: 5px;
    }

    label {
      margin-right: 10px;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .radio-group,
    .checkbox-group,
    .select-group {
      padding: 20px;
      gap: 10px;
    }


    #drag-drop-area {
      border: 2px dashed #555;
      padding: 20px;
      text-align: center;
      margin: 20px;
      cursor: pointer;
    }

    #drag-drop-area:hover {
      background-color: #444;
    }

    #inftool-drag-drop-area {
      border: 2px dashed #555;
      padding: 20px;
      text-align: center;
      margin: 20px;
      cursor: pointer;
    }

    #inftool-drag-drop-area:hover {
      background-color: #444;
    }

    #ticketlist-drag-drop-area {
      border: 2px dashed #555;
      padding: 20px;
      text-align: center;
      margin: 20px;
      cursor: pointer;
    }

    #ticketlist-drag-drop-area:hover {
      background-color: #444;
    }

    #encrypter-drag-drop-area {
      border: 2px dashed #555;
      justify-content: center;
      align-items: center;
      padding: 20px;
      text-align: center;
      margin: 20px;
      cursor: pointer;
    }

    #encrypter-drag-drop-area:hover {
      background-color: #444;
    }

    #decrypter-drag-drop-area {
      border: 2px dashed #555;
      justify-content: center;
      align-items: center;
      padding: 20px;
      text-align: center;
      margin: 20px;
      cursor: pointer;
    }

    #decrypter-drag-drop-area:hover {
      background-color: #444;
    }

    #unbar-drag-drop-area {
      border: 2px dashed #555;
      padding: 20px;
      text-align: center;
      margin: 20px;
      cursor: pointer;
    }

    #unbar-drag-drop-area:hover {
      background-color: #444;
    }

    #zip-drag-drop-area {
      border: 2px dashed #555;
      padding: 20px;
      text-align: center;
      margin: 0 auto;
      cursor: pointer;
      width: 500px;
      height: 100px;
    }

    #zip-drag-drop-area:hover {
      background-color: #444;
    }

    .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      -webkit-transition: .4s;
      transition: .4s;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      -webkit-transition: .4s;
      transition: .4s;
    }

    input:checked+.slider {
      background-color: #2196F3;
    }

    input:focus+.slider {
      box-shadow: 0 0 1px #2196F3;
    }

    input:checked+.slider:before {
      -webkit-transform: translateX(26px);
      -ms-transform: translateX(26px);
      transform: translateX(26px);
    }

    .slider.round {
      border-radius: 34px;
    }

    .slider.round:before {
      border-radius: 50%;
    }


    .radio-group {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin: 25px;
    }

    .radio-button {
      display: flex;
      align-items: center;
    }

    .radio-button input[type="radio"] {
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      height: 30px;
      width: 30px;
      border: 2px solid #999;
      border-radius: 50%;
      outline: none;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      margin-right: 10px;
      position: relative;
    }

    .radio-button input[type="radio"]:after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      height: 17px;
      width: 17px;
      border-radius: 50%;
      background-color: white;
      display: none;
    }

    .radio-button input[type="radio"]:checked:after {
      display: block;
    }

    .radio-button input[type="radio"]:checked {
      background-color: #0078d7;
      border-color: #0078d7;
    }


    .radio-group label {
      cursor: pointer;
      display: flex;
      align-items: center;
    }


    .tools-container {
      display: flex;
      justify-content: space-around;
      flex-direction: row;
    }

    .tools-container>div {
      text-align: center;
      margin: 30px;
    }

    .drag-drop-area {
      width: 500px;
      height: 100px;
      border: 2px dashed #555;
      margin: 0 auto;
      text-align: center;
      cursor: pointer;
    }


    .button-style {
      display: block;
      margin: 20px auto;
      font-size: 20px;
    }

    .button-style4 {
      display: block;
      margin: 5px;
      font-size: 20px;
    }

    .button-style3 {
      display: block;
      margin: 10px;
      font-size: 20px;
    }


    #drag-drop-area:hover {
      background-color: #444;
    }

    .hidden-input {
      position: absolute;
      left: -9999px;
    }


    .toggle-container {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 30px 0;
    }

    .toggle {
      display: flex;
      align-items: center;
      margin: 20px;
    }

    button:active,
    input[type="button"]:active,
    input[type="submit"]:active {
      opacity: 0.3;
      transition-duration: 0.1s;
    }

    h3 {
      text-align: center;
    }

    h2 {
      text-align: center;
    }

    p {
      text-align: center;
      padding-left: 18px;
    }

    .button-container {
      display: flex;
      justify-content: center;
      gap: 10px;
    }

    .button-style2 {
      margin: 20px;
      background-color: #444;
      border: none;
      color: white;
      padding: 10px 20px;
      text-decoration: none;
      display: inline-block;
      font-size: 20px;
      transition-duration: 0.4s;
      cursor: pointer;
      border-radius: 5px;
      box-shadow: 0px 2px 2px 0px rgba(0, 0, 0, 0.2);
    }

    .centered-container {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }

    body.dark-theme {
      background-color: #333;
      color: white;
    }

    body.light-theme {
      background-color: #fff;
      color: #333;
    }

    .light-theme .app-container,
    .light-theme .header,
    .light-theme .content,
    .light-theme .tab-container,
    .light-theme .tab {
      background: #eee;
      color: #333;
    }

    .button-style {
    }

    .theme-toggle-container {
      position: fixed;
      left: 50%;
      bottom: 20px;
      transform: translateX(-50%);
      z-index: 1000;
    }

    #decrypter-file-input {
      position: absolute;
      left: -9999px;
      top: 0;
      opacity: 0;
      pointer-events: none;
      height: 0;
      width: 0;
    }

    #encrypter-file-input {
      position: absolute;
      left: -9999px;
      top: 0;
      opacity: 0;
      pointer-events: none;
      height: 0;
      width: 0;
    }

    #ticketlist-file-input {
      position: absolute;
      left: -9999px;
      top: 0;
      opacity: 0;
      pointer-events: none;
      height: 0;
      width: 0;
    }

    #zip-file-input {
      position: absolute;
      left: -9999px;
      top: 0;
      opacity: 0;
      pointer-events: none;
      height: 0;
      width: 0;
    }

    #unbar-file-input {
      position: absolute;
      left: -9999px;
      width: 1px;
      height: 1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
    }

    .encrypter-slider {
      background-color: #2196F3;
    }

    .encrypter-slider:before {
      -webkit-transform: translateX(26px);
      -ms-transform: translateX(26px);
      transform: translateX(26px);
    }

    #newerhome:checked+.encrypter-slider {
      background-color: #ccc;
    }

    #newerhome:checked+.encrypter-slider:before {
      -webkit-transform: translateX(0px);
      -ms-transform: translateX(0px);
      transform: translateX(0px);
    }

    .decrypter-slider {
      background-color: #2196F3;
    }

    .decrypter-slider:before {
      -webkit-transform: translateX(26px);
      -ms-transform: translateX(26px);
      transform: translateX(26px);
    }

    #newerhome-decrypt:checked+.decrypter-slider {
      background-color: #ccc;
    }

    #newerhome-decrypt:checked+.decrypter-slider:before {
      -webkit-transform: translateX(0px);
      -ms-transform: translateX(0px);
      transform: translateX(0px);
    }

    .copy-container {
      margin: 10px;
      display: inline-flex;
      align-items: center;

    }

    .copy-button {
      margin: 10px;
      padding: 5px 10px;
      font-size: 12px;
    }

    .output-container {
      margin: 5px;
    }

    .copy-container {
      display: inline-flex;
      align-items: center;
      margin-top: 5px;
    }

    .copy-button {
      margin: 5px;
      padding: 5px 10px;
      font-size: 12px;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="app-container">
    <div class="header">
      <h2>Home Lab Web Tools</h2>
    </div>
    <div class="tab-container">
      <button class="tab active" onclick="openTab(event, 'tab1')">CDS Tool</button>
      <button class="tab" onclick="openTab(event, 'tab2')">BAR / SDAT / SHARC</button>
      <button class="tab" onclick="openTab(event, 'tab3')">SceneIDs</button>
	  <button class="tab" onclick="openTab(event, 'tab4')">HCDB</button>
      <button class="tab" onclick="openTab(event, 'tab5')">INF Tool</button>
      <button class="tab" onclick="openTab(event, 'tab6')">TicketList</button>
      <button class="tab" onclick="openTab(event, 'tab7')">SHA1</button>
    </div>
    <div id="tab1" class="content tab-content active">
      <div class="tools-container">
        <div>
          <h2>CDS Encrypter</h2>
          <form class="upload-form" enctype="multipart/form-data" action="/!HomeTools/CDS/" method="POST">
		  	<div class="toggle">
			  <label for="cdnmode">CDN Mode:</label>
			  <select id="cdnmode" name="cdnmode">
				<option value="0">Retail</option>
				<option value="1">Beta</option>
				<option value="2">HDK</option>
			  </select>
			</div>
            <div id="encrypter-drag-drop-area" class="drag-drop-area">
              <p>Drag non-encrypted files here or click to browse</p>
            </div>
            <input type="file" id="encrypter-file-input" name="files[]" multiple required>
            <button class="button-style" type="submit">Encrypt</button>
            <button class="button-style" type="button" id="clear-encrypter-list">Clear List</button>
          </form>
          <ul id="encrypter-file-list"></ul>
        </div>
        <div>
          <h2>CDS Decrypter</h2>
          <form class="upload-form" enctype="multipart/form-data" action="/!HomeTools/CDSBruteforce/" method="POST">
		  	<div class="toggle">
			  <label for="cdnmode">CDN Mode:</label>
			  <select id="cdnmode" name="cdnmode">
				<option value="0">Retail</option>
				<option value="1">Beta</option>
				<option value="2">HDK</option>
			  </select>
			</div>
            <div id="decrypter-drag-drop-area" class="drag-drop-area">
              <p>Drag Encrypted SDC/ODC/HCDB/XML files here or click to browse</p>
            </div>
            <input type="file" id="decrypter-file-input" name="files[]" multiple required>
            <button class="button-style" type="submit">Decrypt</button>
            <button class="button-style" type="button" id="clear-decrypter-list">Clear List</button>
          </form>
          <ul id="decrypter-file-list"></ul>
        </div>
      </div>
    </div>
    <div id="tab2" class="content tab-content">
      <div class="tools-container">
        <!-- Home Archive Creator -->
        <div>
          <h2>Home Archive Creator</h2>
          <form class="upload-form" enctype="multipart/form-data" action="/!HomeTools/MakeBarSdat/" method="POST">
            <div id="zip-drag-drop-area" class="zip-drag-drop-area"
              ondrop="handleDrop(event, 'zip-file-input', 'zip-file-list');" ondragover="handleDragOver(event);">
              <p>Drag ZIP files here or click to browse</p>
            </div>
            <input type="file" id="zip-file-input" name="files[]" accept=".zip" multiple required>
            <div class="radio-group">
              <label class="radio-button">
                BAR:
                <input type="radio" name="mode" id="bar" value="bar" checked="checked">
                <span class="checkmark"></span>
              </label>
              <label class="radio-button">
                BAR (Secure):
                <input type="radio" name="mode" id="barsecure" value="bar">
                <span class="checkmark"></span>
              </label>
              <label class="radio-button">
                SDAT:
                <input type="radio" name="mode" id="sdat" value="sdat">
                <span class="checkmark"></span>
              </label>
              <label class="radio-button">
                SDAT SHARC:
                <input type="radio" name="mode" id="sdatsharc" value="sdat">
                <span class="checkmark"></span>
              </label>
              <label class="radio-button">
                CORE SHARC:
                <input type="radio" name="mode" id="coresharc" value="bar">
                <span class="checkmark"></span>
              </label>
			  <div class="toggle">
				<label for="cdnmode">CDN Mode:</label>
				<select id="cdnmode" name="cdnmode">
				  <option value="0">Retail</option>
				  <option value="1">Beta</option>
				  <option value="2">HDK</option>
				</select>
			  </div>
            </div>
            <div class="checkbox-group hidden">
              <label for="encrypt">Encrypt:</label>
              <input type="checkbox" id="encrypt" name="encrypt">
              <label for="leanzlib">Lean Zlib:</label>
              <input type="checkbox" id="leanzlib" name="leanzlib">
            </div>
            <div class="checkbox-group hidden">
              <label for="bigendian">Big Endian:</label>
              <input type="checkbox" id="bigendian" name="bigendian">
              <label for="version2">SHARC mode:</label>
              <input type="checkbox" id="version2" name="version2">
            </div>
            <label for="optimizeassets">Optimize Assets:</label>
            <input type="checkbox" id="optimizeassets" name="optimizeassets">
            <select id="options" name="options" class="hidden">
              <option value="default" default="">Default Key</option>
              <option value="cdn1">CDN Key 1</option>
              <option value="cdn2">CDN Key 2</option>
            </select>
            <div class="centered-container">
              <label for="TimeStamp">TimeStamp (8 characters):</label>
              <input type="text" id="TimeStamp" name="TimeStamp" pattern="[A-Fa-f0-9]{8}" value="FFFFFFFF" required="">
            </div>
            <button class="button-style" type="submit">Create Archive</button>
            <button class="button-style" type="button" id="clear-archive-creator-list">Clear List</button>
          </form>
          <div class="file-list-container">
            <ul id="zip-file-list"></ul>
          </div>
        </div>

        <!-- Home Archive Unpacker -->
        <div>
          <h2>Home Archive Unpacker</h2>
          <form class="upload-form" enctype="multipart/form-data" action="/!HomeTools/UnBar/" method="POST">
            <div id="unbar-drag-drop-area"
              style="width: 500px; height: 100px; border: 2px dashed #555; text-align: center; cursor: pointer; margin: auto;"
              ondrop="unbarDropHandler(event);" ondragover="unbarDragOverHandler(event);">
              <p>Drag Archive files here or click to browse</p>
            </div>
            <input type="file" id="unbar-file-input" name="files[]" accept=".zip, .bar, .sharc, .dat, .sdat" multiple
              onchange="unbarHandleFileSelect(this);">

            <div class="toggle-container">
			  <div class="toggle">
				<label for="afsengine">AFS Mapper Engine:</label>
				<label class="switch">
				  <input type="checkbox" id="afsengine" name="afsengine">
				  <span class="slider round"></span>
				</label>
			  </div>

			  <div class="toggle">
				<label for="subfolder">Subfolder Mode:</label>
				<label class="switch">
				  <input type="checkbox" id="subfolder" name="subfolder">
				  <span class="slider round"></span>
				</label>
			  </div>

			  <div class="toggle">
				<label for="bruteforce">Bruteforce Mode:</label>
				<label class="switch">
				  <input type="checkbox" id="bruteforce" name="bruteforce">
				  <span class="slider round"></span>
				</label>
			  </div>

			  <div class="toggle">
				<label for="cdnmode">CDN Mode:</label>
				<select id="cdnmode" name="cdnmode">
				  <option value="0">Retail</option>
				  <option value="1">Beta</option>
				  <option value="2">HDK</option>
				</select>
			  </div>
			</div>
            <div class="centered-container">
              <label for="prefix">Path Prefix (if any required):</label>
              <input type="text" id="prefix" name="prefix">
            </div>
            <button class="button-style" type="submit">Unpack and Map</button>
            <button class="button-style" type="button" id="clear-archive-unpacker-list">Clear List</button>

            <ul id="unbar-file-list"></ul>
        </div>
      </div>
    </div>

    <div id="tab3" class="content tab-content">
      <div class="forms-container" style="display: flex; justify-content: center; gap: 300px;">

        <div class="centered-container">
          <h2>SceneID Encrypter</h2>
          <form id="sceneid-encrypter-form" class="upload-form">
            <label for="sceneid">Enter a Number:</label>
            <input type="number" id="sceneid" name="sceneid" min="0" max="65535" size="6">

            <div class="toggle-container">
              <label for="newerhome">Legacy Mode:</label>
              <label class="switch">
                <input type="checkbox" id="newerhome" name="newerhome" checked>
                <span class="slider round encrypter-slider"></span>
              </label>
            </div>

            <button type="button" id="encrypt-sceneid-button" class="button-style4">Encrypt</button>
            <div class="centered-container">
              <p>Encrypted SceneID:</p>
              <div class="copy-container">
                <input type="text" id="encrypted-sceneid" value="00000000-0000-0000-0000-000000000000" size="34">
                <button type="button" onclick="copyToClipboard2('encrypted-sceneid')"
                  class="button-style copy-button">Copy</button>
              </div>
            </div>
          </form>
        </div>

        <!-- SceneID Decrypter Form -->
        <div>
          <div class="centered-container">
            <h2>SceneID Decrypter</h2>
          </div>
          <form id="sceneid-decrypter-form" class="upload-form">
            <div class="centered-container">
              <label for="channelid">Enter a SceneID / ChannelID:</label>
              <input type="text" id="channelid" name="channelid"
                pattern="^[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}$" size="34">
            </div>
            <div class="toggle-container">
              <label for="newerhome-decrypt">Legacy Mode:</label>
              <label class="switch">
                <input type="checkbox" id="newerhome-decrypt" name="newerhome" checked>
                <span class="slider round decrypter-slider"></span>
              </label>
            </div>
            <button type="button" id="decrypt-sceneid-button" class="button-style">Decrypt</button>
            <div class="centered-container">
              <p>Decrypted SceneID:</p>
              <div class="copy-container">
                <input type="text" id="decrypted-sceneid" value="" size="6">
                <button type="button" onclick="copyToClipboard2('decrypted-sceneid')"
                  class="button-style copy-button">Copy</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div id="tab4" class="content tab-content">
      <h2>HCDB Unpacker</h2>
      <form id="hcdbtool-upload-form" class="upload-form" enctype="multipart/form-data" action="/!HomeTools/HCDBUnpack/"
        method="POST">
        <div id="hcdbtool-drag-drop-area"
          style="width: 700px; height: 100px; border: 2px dashed #555; text-align: center; cursor: pointer; margin: auto;"
          ondrop="handleInfToolFileInteraction(event, 'hcdbtool-file-input', 'hcdbtool-file-list');"
          ondragover="event.preventDefault();">
          <p>Drag files here or click to browse</p>
        </div>
        <input type="file" id="hcdbtool-file-input" name="files[]" multiple class="hidden-input" required
          onchange="handleInfToolFileInteraction(event, 'hcdbtool-file-input', 'hcdbtool-file-list');">
        <button class="button-style" type="submit">Unpack to SQL</button>
        <button class="button-style" type="button" id="clear-hcdbtool-list">Clear List</button>
      </form>
      <ul id="hcdbtool-file-list"></ul>
    </div>
	
	 <div id="tab5" class="content tab-content">
      <h2>INF Encrypter / Decrypter</h2>
      <form id="inftool-upload-form" class="upload-form" enctype="multipart/form-data" action="/!HomeTools/INF/"
        method="POST">
        <div id="inftool-drag-drop-area"
          style="width: 700px; height: 100px; border: 2px dashed #555; text-align: center; cursor: pointer; margin: auto;"
          ondrop="handleInfToolFileInteraction(event, 'inftool-file-input', 'inftool-file-list');"
          ondragover="event.preventDefault();">
          <p>Drag INF files here or click to browse</p>
        </div>
        <input type="file" id="inftool-file-input" name="files[]" multiple class="hidden-input" required
          onchange="handleInfToolFileInteraction(event, 'inftool-file-input', 'inftool-file-list');">
        <button class="button-style" type="submit">Encrypt / Decrypt</button>
        <button class="button-style" type="button" id="clear-inftool-list">Clear List</button>
      </form>
      <ul id="inftool-file-list"></ul>
    </div>

    <div id="tab6" class="content tab-content">
      <h2>TICKET.LST Encrypter / Decrypter</h2>
      <form id="ticketlist-upload-form" class="upload-form" enctype="multipart/form-data"
        action="/!HomeTools/TicketList/" method="POST">
        <div id="ticketlist-drag-drop-area"
          style="width: 700px; height: 100px; border: 2px dashed #555; text-align: center; cursor: pointer; margin: auto;"
          ondrop="ticketlistDropHandler(event);" ondragover="ticketlistDragOverHandler(event);">
          <p>Drag LST files here or click to browse</p>
        </div>
        <input type="file" id="ticketlist-file-input" name="files[]" multiple required
          onchange="ticketlistHandleFileSelect(this);">
        <div class="toggle-container">
          <label for="version1">Legacy Mode:</label>
          <label class="switch">
            <input type="checkbox" id="version1" name="version1">
            <span class="slider round"></span>
          </label>
        </div>
        <button class="button-style" type="submit">Encrypt / Decrypt</button>
        <button class="button-style" type="button" id="clear-ticketlist-list">Clear List</button>
      </form>
      <ul id="ticketlist-file-list"></ul>
    </div>

    <div id="tab7" class="content tab-content">
      <h2>SHA1 Generator</h2>
      <div class="button-container">
        <button id="copyButton" class="button-style2" onclick="copyToClipboard()">Copy List</button>
        <button id="clearButton" class="button-style2" onclick="clearList()">Clear List</button>
      </div>
      <div id="drag-drop-area">
        <p>Drag and drop files here or click to select files</p>
        <input type="file" id="fileInput" multiple style="display:none;" onchange="handleFiles(this.files)">
      </div>
      <ul id="file-list"></ul>
    </div>
  </div>

  <div class="theme-toggle-container">
    <button id="theme-toggle" class="button-style">Toggle Dark/Light Mode</button>
  </div>

  <script>
    // CDS Encrypter Tool
    function handleCdsEncrypterFileInteraction(event, inputId, listId) {
      event.preventDefault();
      let selectedFiles = (event.type === 'drop') ? getFilesFromDrop(event) : Array.from(event.target.files);
      let existingFiles = Array.from(document.getElementById(inputId).files);
      let combinedFiles = combineUniqueFiles(existingFiles, selectedFiles);

      updateFileInputAndUI(inputId, listId, combinedFiles);
    }
    document.getElementById('encrypter-drag-drop-area').addEventListener('drop', function (event) {
      handleCdsEncrypterFileInteraction(event, 'encrypter-file-input', 'encrypter-file-list');
    });
    document.getElementById('encrypter-drag-drop-area').addEventListener('dragover', function (event) {
      event.preventDefault();
    });
    document.getElementById('encrypter-drag-drop-area').addEventListener('click', function () {
      document.getElementById('encrypter-file-input').click();
    });
    document.getElementById('encrypter-file-input').addEventListener('change', function (event) {
      handleCdsEncrypterFileInteraction(event, 'encrypter-file-input', 'encrypter-file-list');
    });
    document.getElementById('clear-encrypter-list').addEventListener('click', function () {
      document.getElementById('encrypter-file-list').innerHTML = '';
      const dataTransfer = new DataTransfer();
      document.getElementById('encrypter-file-input').files = dataTransfer.files;
    });


    // CDS Decrypter Tool
    function handleCdsDecrypterFileInteraction(event, inputId, listId) {
      event.preventDefault();
      let selectedFiles = [];
      if (event.type === 'drop') {
        selectedFiles = getFilesFromDrop(event);
      } else if (event.type === 'change') {
        selectedFiles = Array.from(event.target.files);
      }
      let existingFiles = (document.getElementById(inputId).files.length > 0) ? Array.from(document.getElementById(inputId).files) : [];
      let combinedFiles = combineUniqueFiles(existingFiles, selectedFiles);

      updateFileInputAndUI(inputId, listId, combinedFiles);
    }
    document.getElementById('decrypter-drag-drop-area').addEventListener('drop', function (event) {
      handleCdsDecrypterFileInteraction(event, 'decrypter-file-input', 'decrypter-file-list');
    });
    document.getElementById('decrypter-drag-drop-area').addEventListener('dragover', function (event) {
      event.preventDefault();
    });
    document.getElementById('decrypter-drag-drop-area').addEventListener('click', function () {
      document.getElementById('decrypter-file-input').click();
    });
    document.getElementById('decrypter-file-input').addEventListener('change', function (event) {
      handleCdsDecrypterFileInteraction(event, 'decrypter-file-input', 'decrypter-file-list');
    });
    document.getElementById('clear-decrypter-list').addEventListener('click', function () {
      document.getElementById('decrypter-file-list').innerHTML = '';
      const dataTransfer = new DataTransfer();
      document.getElementById('decrypter-file-input').files = dataTransfer.files;
    });


    document.addEventListener('DOMContentLoaded', function () {
      var encryptCheckbox = document.getElementById('encrypt');
      var version2Checkbox = document.getElementById('version2');
      var keySelect = document.getElementById('options');

      function updateFormElements(mode) {
        switch (mode) {
          case 'bar':
            encryptCheckbox.checked = false;
            version2Checkbox.checked = false;
            keySelect.value = 'default';
            break;
          case 'bar_secure':
            encryptCheckbox.checked = true;
            version2Checkbox.checked = false;
            keySelect.value = 'default';
            break;
          case 'sdat':
            encryptCheckbox.checked = false;
            version2Checkbox.checked = false;
            keySelect.value = 'default';
            break;
          case 'sdat_sharc':
            encryptCheckbox.checked = false;
            version2Checkbox.checked = true;
            keySelect.value = 'cdn2';
            break;
          case 'core_sharc':
            encryptCheckbox.checked = false;
            version2Checkbox.checked = true;
            keySelect.value = 'default';
            break;
        }
      }

      // Add event listeners for all radio buttons
      document.getElementById('bar').addEventListener('change', function () {
        if (this.checked) updateFormElements('bar');
      });
      document.getElementById('barsecure').addEventListener('change', function () {
        if (this.checked) updateFormElements('bar_secure');
      });
      document.getElementById('sdat').addEventListener('change', function () {
        if (this.checked) updateFormElements('sdat');
      });
      document.getElementById('sdatsharc').addEventListener('change', function () {
        if (this.checked) updateFormElements('sdat_sharc');
      });
      document.getElementById('coresharc').addEventListener('change', function () {
        if (this.checked) updateFormElements('core_sharc');
      });
      updateFormElements('bar');
    });

    // Home Archive Creator
    function handleDragOver(event) {
      event.preventDefault();
    }

    function handleDrop(event, inputId, listId) {
      event.preventDefault();
      const files = event.dataTransfer.files;
      handleFileInteraction(files, inputId, listId);
    }

    function handleFileInteraction(selectedFiles, inputId, listId) {
      let existingFiles = Array.from(document.getElementById(inputId).files);
      let combinedFiles = combineUniqueFiles(existingFiles, Array.from(selectedFiles));
      updateFileInputAndUI(inputId, listId, combinedFiles);
    }

    function handleArchiveCreatorFileInteraction(event, inputId, listId) {
      event.preventDefault();
      let selectedFiles = [];
      if (event.type === 'drop') {
        selectedFiles = getFilesFromDrop(event);
      } else if (event.type === 'change') {
        selectedFiles = Array.from(event.target.files);
      }
      let existingFiles = (document.getElementById(inputId).files.length > 0) ? Array.from(document.getElementById(inputId).files) : [];
      let combinedFiles = combineUniqueFiles(existingFiles, selectedFiles);
      updateFileInputAndUI(inputId, listId, combinedFiles);
    }

    document.getElementById('zip-drag-drop-area').addEventListener('drop', function (event) {
      handleArchiveCreatorFileInteraction(event, 'zip-file-input', 'zip-file-list');
    });
    document.getElementById('zip-drag-drop-area').addEventListener('dragover', function (event) {
      event.preventDefault();
    });
    document.getElementById('zip-drag-drop-area').addEventListener('click', function () {
      document.getElementById('zip-file-input').click();
    });
    document.getElementById('zip-file-input').addEventListener('change', function (event) {
      handleArchiveCreatorFileInteraction(event, 'zip-file-input', 'zip-file-list');
    });

    function getFilesFromDrop(event) {
      return Array.from(event.dataTransfer.items)
        .filter(item => item.kind === 'file')
        .map(item => item.getAsFile());
    }
    function combineUniqueFiles(existingFiles, selectedFiles) {
      let uniqueFiles = new Map();
      existingFiles.forEach(file => uniqueFiles.set(file.name, file));
      selectedFiles.forEach(file => {
        if (!uniqueFiles.has(file.name)) {
          uniqueFiles.set(file.name, file);
        }
      });
      return Array.from(uniqueFiles.values());
    }
    function updateFileInputAndUI(inputId, listId, files) {
      const dataTransfer = new DataTransfer();
      files.forEach(file => dataTransfer.items.add(file));
      document.getElementById(inputId).files = dataTransfer.files;
      const fileList = document.getElementById(listId);
      fileList.innerHTML = '';
      files.forEach(file => {
        const li = document.createElement('li');
        li.textContent = file.name;
        fileList.appendChild(li);
      });
    }
    document.getElementById('zip-file-input').closest('form').addEventListener('submit', function (event) {
    });

// Clear list for Home Archive Creator
    document.getElementById('clear-archive-creator-list').addEventListener('click', function () {
      document.getElementById('zip-file-list').innerHTML = '';
      const dataTransfer = new DataTransfer();
      document.getElementById('zip-file-input').files = dataTransfer.files;
    });

// Clear list for Home Archive Unpacker
    document.getElementById('clear-archive-unpacker-list').addEventListener('click', function () {
      document.getElementById('unbar-file-list').innerHTML = '';
      const dataTransfer = new DataTransfer();
      document.getElementById('unbar-file-input').files = dataTransfer.files;
    });



// Unbar File Selection Handler
    function unbarHandleFileSelect() {
      const fileListElement = document.getElementById('unbar-file-list');
      const fileInputElement = document.getElementById('unbar-file-input');
      fileListElement.innerHTML = ''; 
      const files = fileInputElement.files;
      for (let i = 0; i < files.length; i++) {
        const file = files[i];
        const li = document.createElement('li');
        li.textContent = file.name;
        fileListElement.appendChild(li);
      }
    }

// Drag-and-Drop Handler
    function unbarDropHandler(event) {
      event.preventDefault();
      const dataTransfer = event.dataTransfer;
      const files = dataTransfer.files;
      const fileInputElement = document.getElementById('unbar-file-input');
      fileInputElement.files = files;
      unbarHandleFileSelect();
    }

    // Click Event on Drag-and-Drop Area
    function setupUnbarEventListeners() {
      const dragDropArea = document.getElementById('unbar-drag-drop-area');
      const fileInputElement = document.getElementById('unbar-file-input');

      dragDropArea.addEventListener('click', function () {
        fileInputElement.click();
      });

      dragDropArea.addEventListener('dragover', function (event) {
        event.preventDefault();
      });

      dragDropArea.addEventListener('drop', unbarDropHandler);

      fileInputElement.addEventListener('change', unbarHandleFileSelect);
    }

    // Initialize event listeners when DOM content is fully loaded
    document.addEventListener('DOMContentLoaded', setupUnbarEventListeners);


// HCDB Bruteforcer Tool
function handleHcdbBruteforcerFileInteraction(event, inputId, listId) {
  event.preventDefault();
  let selectedFiles = (event.type === 'drop') ? getFilesFromDrop(event) : Array.from(event.target.files);
  let existingFiles = Array.from(document.getElementById(inputId).files);
  let combinedFiles = combineUniqueFiles(existingFiles, selectedFiles);

  updateFileInputAndUI(inputId, listId, combinedFiles);
}

document.getElementById('hcdbtool-drag-drop-area').addEventListener('drop', function (event) {
  handleHcdbBruteforcerFileInteraction(event, 'hcdbtool-file-input', 'hcdbtool-file-list');
});
document.getElementById('hcdbtool-drag-drop-area').addEventListener('dragover', function (event) {
  event.preventDefault();
});
document.getElementById('hcdbtool-drag-drop-area').addEventListener('click', function () {
  document.getElementById('hcdbtool-file-input').click();
});
document.getElementById('hcdbtool-file-input').addEventListener('change', function (event) {
  handleHcdbBruteforcerFileInteraction(event, 'hcdbtool-file-input', 'hcdbtool-file-list');
});
document.getElementById('clear-hcdbtool-list').addEventListener('click', function () {
  document.getElementById('hcdbtool-file-list').innerHTML = '';
  const dataTransfer = new DataTransfer();
  document.getElementById('hcdbtool-file-input').files = dataTransfer.files;
});
document.getElementById('clear-hcdbtool-list').addEventListener('click', function () {
  document.getElementById('hcdbtool-file-list').innerHTML = '';
  const dataTransfer = new DataTransfer();
  document.getElementById('hcdbtool-file-input').files = dataTransfer.files;
});



// INF TOOL
    function handleInfToolFileInteraction(event, inputId, listId) {
      event.preventDefault();
      let selectedFiles = (event.type === 'drop') ? getFilesFromDrop(event) : Array.from(event.target.files);
      let existingFiles = Array.from(document.getElementById(inputId).files);
      let combinedFiles = combineUniqueFiles(existingFiles, selectedFiles);

      updateFileInputAndUI(inputId, listId, combinedFiles);
    }
    function getFilesFromDrop(event) {
      return Array.from(event.dataTransfer.items)
        .filter(item => item.kind === 'file')
        .map(item => item.getAsFile());
    }
    function combineUniqueFiles(existingFiles, selectedFiles) {
      let uniqueFiles = new Map();
      existingFiles.forEach(file => uniqueFiles.set(file.name, file));
      selectedFiles.forEach(file => {
        if (!uniqueFiles.has(file.name)) {
          uniqueFiles.set(file.name, file);
        }
      });
      return Array.from(uniqueFiles.values());
    }
    function updateFileInputAndUI(inputId, listId, files) {
      const dataTransfer = new DataTransfer();
      files.forEach(file => dataTransfer.items.add(file));
      document.getElementById(inputId).files = dataTransfer.files;

      const fileList = document.getElementById(listId);
      fileList.innerHTML = '';
      files.forEach(file => {
        const li = document.createElement('li');
        li.textContent = file.name;
        fileList.appendChild(li);
      });
    }
    document.getElementById('inftool-drag-drop-area').addEventListener('drop', function (event) {
      handleInfToolFileInteraction(event, 'inftool-file-input', 'inftool-file-list');
    });
    document.getElementById('inftool-drag-drop-area').addEventListener('dragover', function (event) {
      event.preventDefault();
    });
    document.getElementById('inftool-drag-drop-area').addEventListener('click', function () {
      document.getElementById('inftool-file-input').click();
    });
    document.getElementById('inftool-file-input').addEventListener('change', function (event) {
      handleInfToolFileInteraction(event, 'inftool-file-input', 'inftool-file-list');
    });
    document.getElementById('clear-inftool-list').addEventListener('click', function () {
      document.getElementById('inftool-file-list').innerHTML = '';
      const dataTransfer = new DataTransfer();
      document.getElementById('inftool-file-input').files = dataTransfer.files;
    });
	

    // TICKETLIST TOOL
    function handleTicketListFileInteraction(event, inputId, listId) {
      event.preventDefault();
      let selectedFiles = (event.type === 'drop') ? getFilesFromDrop(event) : Array.from(event.target.files);
      let existingFiles = Array.from(document.getElementById(inputId).files);
      let combinedFiles = combineUniqueFiles(existingFiles, selectedFiles);
      updateFileInputAndUI(inputId, listId, combinedFiles);
    }
    document.getElementById('ticketlist-drag-drop-area').addEventListener('drop', function (event) {
      handleTicketListFileInteraction(event, 'ticketlist-file-input', 'ticketlist-file-list');
    });
    document.getElementById('ticketlist-drag-drop-area').addEventListener('dragover', function (event) {
      event.preventDefault();
    });
    document.getElementById('ticketlist-drag-drop-area').addEventListener('click', function () {
      document.getElementById('ticketlist-file-input').click();
    });
    document.getElementById('ticketlist-file-input').addEventListener('change', function (event) {
      handleTicketListFileInteraction(event, 'ticketlist-file-input', 'ticketlist-file-list');
    });
    document.getElementById('clear-ticketlist-list').addEventListener('click', function () {
      document.getElementById('ticketlist-file-list').innerHTML = '';
      const dataTransfer = new DataTransfer();
      document.getElementById('ticketlist-file-input').files = dataTransfer.files;
    });



    // SceneID Encrypter
    document.addEventListener('DOMContentLoaded', function () {
      var encryptButton = document.getElementById('encrypt-sceneid-button');
      encryptButton.addEventListener('click', function (event) {
        var sceneIdValue = document.getElementById('sceneid').value;
        var isLegacyMode = document.getElementById('newerhome').checked;
        var encryptedSceneIdDisplay = document.getElementById('encrypted-sceneid');
        var formData = new FormData();
        formData.append('sceneid', sceneIdValue);
        formData.append('newerhome', isLegacyMode ? 'on' : 'off');
        fetch('/!HomeTools/ChannelID/', {
          method: 'POST',
          body: formData
        })
          .then(response => response.text())
          .then(data => {
            encryptedSceneIdDisplay.value = data;
            console.log('Encrypted SceneID: ', data);
          })
          .catch(error => {
            console.error('Error:', error);
          });
        event.preventDefault();
      });
    });


    // SceneID Decrypter
    document.addEventListener('DOMContentLoaded', function () {
      var decryptButton = document.getElementById('decrypt-sceneid-button');
      decryptButton.addEventListener('click', function (event) {
        var channelIdValue = document.getElementById('channelid').value;
        var isLegacyModeDecrypt = document.getElementById('newerhome-decrypt').checked;
        var decryptedSceneIdDisplay = document.getElementById('decrypted-sceneid');
        var formData = new FormData();
        formData.append('channelid', channelIdValue);
        formData.append('newerhome', isLegacyModeDecrypt ? 'on' : 'off');
        fetch('/!HomeTools/SceneID/', {
          method: 'POST',
          body: formData
        })
          .then(response => response.text())
          .then(data => {
            decryptedSceneIdDisplay.value = data;
            console.log('Decrypted SceneID: ', data);
          })
          .catch(error => {
            console.error('Error:', error);
          });
        event.preventDefault();
      });
    });


    //Dark Mode Toggle
    function toggleTheme() {
      const body = document.body;
      const toggleBtn = document.getElementById('theme-toggle');
      if (body.classList.contains('light-theme')) {
        body.classList.remove('light-theme');
        body.classList.add('dark-theme');
        toggleBtn.textContent = 'Toggle Light Mode';
      } else {
        body.classList.remove('dark-theme');
        body.classList.add('light-theme');
        toggleBtn.textContent = 'Toggle Dark Mode';
      }
    }
    document.getElementById('theme-toggle').addEventListener('click', toggleTheme);

    function copyToClipboard2(elementId) {
      var text = document.getElementById(elementId).value;
      navigator.clipboard.writeText(text).then(function () {
        console.log('Text copied to clipboard');
      }).catch(function (err) {
        console.error('Could not copy text: ', err);
      });
    }

    function unbarDragOverHandler(ev) {
      ev.preventDefault();
    }
    function openTab(evt, tabName) {
      var i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName("tab-content");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }
      tablinks = document.getElementsByClassName("tab");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
      document.getElementById(tabName).style.display = "block";
      evt.currentTarget.className += " active";
    }
    function validateInput() {
      var channelInput = document.getElementById('channelid');
      var pattern = /^[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}$/;
      if (!pattern.test(channelInput.value)) {
        alert('Invalid Channel ID format. Please enter a valid GUID.');
        return false;
      }
      return true;
    }
    document.getElementById('encrypter-file-input').addEventListener('change', function (event) {
      const fileListElement = document.getElementById('encrypter-file-list');
      fileListElement.innerHTML = ''; // Clear existing list
      const files = event.target.files;
      for (let i = 0; i < files.length; i++) {
        const li = document.createElement('li');
        li.textContent = files[i].name;
        fileListElement.appendChild(li);
      }
    });
    document.getElementById('decrypter-file-input').addEventListener('change', function (event) {
      const fileListElement = document.getElementById('decrypter-file-list');
      fileListElement.innerHTML = ''; // Clear existing list
      const files = event.target.files;
      for (let i = 0; i < files.length; i++) {
        const li = document.createElement('li');
        li.textContent = files[i].name;
        fileListElement.appendChild(li);
      }
    });


    document.getElementById('drag-drop-area').addEventListener('click', () => {
      document.getElementById('fileInput').click();
    });
    document.getElementById('drag-drop-area').addEventListener('dragover', (event) => {
      event.stopPropagation();
      event.preventDefault();
      event.dataTransfer.dropEffect = 'copy';
    });
    document.getElementById('drag-drop-area').addEventListener('drop', (event) => {
      event.stopPropagation();
      event.preventDefault();
      const files = event.dataTransfer.files;
      handleFiles(files);
    });
    function handleFiles(files) {
      const fileList = document.getElementById('file-list');
      fileList.innerHTML = ""; // Clear the list

      for (let i = 0; i < files.length; i++) {
        const li = document.createElement('li');
        const file = files[i];
        const sha1Placeholder = 'SHA1_PLACEHOLDER';
        li.textContent = `${file.name} - ${sha1Placeholder}`;
        fileList.appendChild(li);
      }
    }
    function dropHandler(ev) {
      ev.preventDefault();
      if (ev.dataTransfer.items) {
        // Use DataTransferItemList interface to access the file(s)
        for (var i = 0; i < ev.dataTransfer.items.length; i++) {
          // If dropped items aren't files, reject them
          if (ev.dataTransfer.items[i].kind === 'file') {
            var file = ev.dataTransfer.items[i].getAsFile();
            console.log('... file[' + i + '].name = ' + file.name);
          }
        }
      }
    }
    function dragOverHandler(ev) {
      ev.preventDefault();
    }
    async function calculateSHA1(file) {
      const buffer = await file.arrayBuffer();
      const digest = await crypto.subtle.digest('SHA-1', buffer);
      const hashArray = Array.from(new Uint8Array(digest));
      const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
      return hashHex;
    }
    function handleFiles(files) {
      const fileList = document.getElementById('file-list');
      fileList.innerHTML = ""; // Clear the list
      for (let i = 0; i < files.length; i++) {
        const file = files[i];
        calculateSHA1(file).then((hashHex) => {
          const li = document.createElement('li');
          li.textContent = `${file.name} - ${hashHex}`;
          fileList.appendChild(li);
        }).catch((error) => {
          console.error('SHA-1 calculation failed', error);
        });
      }
    }
    function copyToClipboard() {
      const listItems = document.querySelectorAll('#file-list li');
      const copyText = Array.from(listItems).map(li => li.textContent).join('\n');
      navigator.clipboard.writeText(copyText).then(() => {
        alert('Copied to clipboard');
      }).catch(err => {
        alert('Error in copying text: ', err);
      });
    }
    function clearList() {
      document.getElementById('file-list').innerHTML = '';
    }
  </script>
</body>

</html>